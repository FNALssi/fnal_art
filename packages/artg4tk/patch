diff --git a/CMakeLists.txt b/CMakeLists.txt
index e06542d..069ebe5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,40 +1,48 @@
 cmake_minimum_required(VERSION 3.7)
 
-project(artg4tk)
-
-find_package(cetbuildtools REQUIRED)
-
+project(artg4tk VERSION 9.02.01 LANGUAGES CXX )
+
+set( fcl_dir  fcl )
+set( gdml_dir gdml )
+
+# cetbuildtools contains our cmake modules
+#find_package(cetbuildtools REQUIRED)
+#
+#list(APPEND CMAKE_MODULE_PATH
+#  $ENV{CANVAS_ROOT_IO_DIR}/Modules
+#  $ENV{ART_DIR}/Modules)
+#
+find_package(cetmodules REQUIRED)
 include(CetCMakeEnv)
 cet_cmake_env()
 
-cet_set_compiler_flags(DIAGS CAUTIOUS WERROR NO_UNDEFINED EXTRA_FLAGS -pedantic)
-
-#if (NOT ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
-#set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,--no-undefined,--no-allow-shlib-undefined,--as-needed")
-#set(CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULELINKER_FLAGS} -Wl,--no-undefined,--no-allow-shlib-undefined,--as-needed")
-#set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--no-undefined,--no-allow-shlib-undefined,--as-needed")
-#endif()
-
-cet_report_compiler_flags()
-
-find_ups_product(art)
-find_ups_boost()
-find_ups_product(canvas)
-find_ups_product(canvas_root_io)
-find_ups_product(cetlib_except)
-find_ups_product(clhep)
-find_ups_product(fhiclcpp)
-find_ups_geant4()
-find_ups_product(messagefacility)
-
-list(APPEND CMAKE_MODULE_PATH $ENV{CANVAS_ROOT_IO_DIR}/Modules $ENV{ART_DIR}/Modules)
+# These are needed for Art stuff
+find_package(art REQUIRED)
+find_package(art_root_io REQUIRED)
+find_package(canvas_root_io REQUIRED)
+find_package(canvas REQUIRED)
+find_package(fhiclcpp REQUIRED)
+find_package(messagefacility REQUIRED)
+find_package(cetlib REQUIRED)
+find_package(cetlib_except REQUIRED)
+find_package(hep_concurrency REQUIRED)
+find_package(CLHEP REQUIRED)
+find_package(Geant4 REQUIRED COMPONENTS ui_all vis_all)
+find_package(ROOT REQUIRED COMPONENTS)
+find_package(Boost REQUIRED COMPONENTS system filesystem)
+include(${Geant4_USE_FILE})
 
 include(ArtDictionary)
 include(ArtMake)
 include(BuildPlugins)
-include(UseCPack)
 
-add_subdirectory(artg4tk)
-add_subdirectory(examples)
-add_subdirectory(fcl)
-add_subdirectory(ups)
+# Build these directories
+add_subdirectory( artg4tk )
+add_subdirectory( examples )
+add_subdirectory( fcl )
+
+# ups - table and config files
+#add_subdirectory(ups)
+
+add_subdirectory( cmakeConfig )
+
diff --git a/artg4tk/Analysis/CMakeLists.txt b/artg4tk/Analysis/CMakeLists.txt
index b0a5ad0..107f4fa 100644
--- a/artg4tk/Analysis/CMakeLists.txt
+++ b/artg4tk/Analysis/CMakeLists.txt
@@ -2,8 +2,8 @@ art_make(
   MODULE_LIBRARIES
     art_Framework_Core
     art_Framework_Principal
-    art_Framework_Services_Optional
-    art_Framework_Services_Optional_TFileService_service
+    art_root_io_tfile_support ${ROOT_Core_LIBRARY}
+    art_root_io_TFileService_service
     art_Framework_Services_Registry
     artg4tk_DataProducts_EventGenerators
     art_Persistency_Provenance
@@ -12,10 +12,10 @@ art_make(
     ${Boost_SYSTEM_LIBRARY}
     canvas
     cetlib_except
-    clhep
-    ${ROOT_CORE}
+    CLHEP
+    ${ROOT_Core_LIBRARY}
     fhiclcpp
-    ${G4ZLIB}
-    ${ROOT_HIST}
-    ${ROOT_TREE}
+    ${Geant4_LIBRARIES} 
+    ${ROOT_Hist_LIBRARY}
+    ${ROOT_Tree_LIBRARY}
 )
diff --git a/artg4tk/Analysis/CheckCalorimeterHits_module.hh b/artg4tk/Analysis/CheckCalorimeterHits_module.hh
index da4c156..ffeb272 100644
--- a/artg4tk/Analysis/CheckCalorimeterHits_module.hh
+++ b/artg4tk/Analysis/CheckCalorimeterHits_module.hh
@@ -20,10 +20,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4 includes:
diff --git a/artg4tk/Analysis/CheckDRCalorimeterHits_module.hh b/artg4tk/Analysis/CheckDRCalorimeterHits_module.hh
index f942c9d..567898e 100644
--- a/artg4tk/Analysis/CheckDRCalorimeterHits_module.hh
+++ b/artg4tk/Analysis/CheckDRCalorimeterHits_module.hh
@@ -20,10 +20,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4tk includes:
diff --git a/artg4tk/Analysis/CheckGenParticle_module.hh b/artg4tk/Analysis/CheckGenParticle_module.hh
index 79095ed..0cc4f4c 100644
--- a/artg4tk/Analysis/CheckGenParticle_module.hh
+++ b/artg4tk/Analysis/CheckGenParticle_module.hh
@@ -26,10 +26,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4tk includes:
diff --git a/artg4tk/Analysis/CheckHits_module.hh b/artg4tk/Analysis/CheckHits_module.hh
index 1c671f1..ec46391 100644
--- a/artg4tk/Analysis/CheckHits_module.hh
+++ b/artg4tk/Analysis/CheckHits_module.hh
@@ -20,10 +20,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4 includes:
diff --git a/artg4tk/Analysis/CheckInteractions_module.hh b/artg4tk/Analysis/CheckInteractions_module.hh
index 02920e2..652020c 100644
--- a/artg4tk/Analysis/CheckInteractions_module.hh
+++ b/artg4tk/Analysis/CheckInteractions_module.hh
@@ -27,10 +27,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4tk includes:
diff --git a/artg4tk/Analysis/CheckPhotonHits_module.hh b/artg4tk/Analysis/CheckPhotonHits_module.hh
index 7adc55c..2dd0923 100644
--- a/artg4tk/Analysis/CheckPhotonHits_module.hh
+++ b/artg4tk/Analysis/CheckPhotonHits_module.hh
@@ -23,10 +23,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4tk includes:
diff --git a/artg4tk/Analysis/CheckProtonProduction_module.hh b/artg4tk/Analysis/CheckProtonProduction_module.hh
index c9c7997..25abee6 100644
--- a/artg4tk/Analysis/CheckProtonProduction_module.hh
+++ b/artg4tk/Analysis/CheckProtonProduction_module.hh
@@ -27,10 +27,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4tk includes:
diff --git a/artg4tk/Analysis/CheckTrackerHits_module.hh b/artg4tk/Analysis/CheckTrackerHits_module.hh
index 18604d9..1e1071c 100644
--- a/artg4tk/Analysis/CheckTrackerHits_module.hh
+++ b/artg4tk/Analysis/CheckTrackerHits_module.hh
@@ -20,10 +20,10 @@
 #include "art/Framework/Core/EDAnalyzer.h"
 #include "art/Framework/Principal/Event.h"
 #include "art/Framework/Principal/Handle.h"
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "art/Framework/Core/ModuleMacros.h"
 #include "art/Framework/Principal/Run.h"
-#include "art/Framework/Services/Optional/TFileDirectory.h"
+#include "art_root_io/TFileDirectory.h"
 #include "art/Framework/Services/Registry/ServiceHandle.h"
 #include "art/Framework/Principal/Provenance.h"
 // artg4 includes:
diff --git a/artg4tk/CMakeLists.txt b/artg4tk/CMakeLists.txt
index e07d05f..f4f98b1 100644
--- a/artg4tk/CMakeLists.txt
+++ b/artg4tk/CMakeLists.txt
@@ -1,3 +1,4 @@
+set(CMAKE_CXX_FLAGS "${Geant4_CXX_FLAGS} -Wno-shadow -Wno-unused-parameter -Wno-ignored-qualifiers -Wno-misleading-indentation -Wno-maybe-uninitialized -Wno-overloaded-virtual")
 add_subdirectory(actionBase)
 add_subdirectory(Analysis)
 add_subdirectory(Core)
diff --git a/artg4tk/Core/CMakeLists.txt b/artg4tk/Core/CMakeLists.txt
index 9fb9ee8..056c74b 100644
--- a/artg4tk/Core/CMakeLists.txt
+++ b/artg4tk/Core/CMakeLists.txt
@@ -3,7 +3,7 @@ art_make(
     artg4tk_geantInit
     artg4tk_pluginDetectors_gdml
     artg4tk_services_PhysicsListHolder_service
-    ${G4_LIB_LIST}
+    ${Geant4_LIBRARIES}
 )
 
 install_headers()
diff --git a/artg4tk/DataProducts/EventGenerators/CMakeLists.txt b/artg4tk/DataProducts/EventGenerators/CMakeLists.txt
index 563a445..f364044 100644
--- a/artg4tk/DataProducts/EventGenerators/CMakeLists.txt
+++ b/artg4tk/DataProducts/EventGenerators/CMakeLists.txt
@@ -1,7 +1,7 @@
 art_make(
   LIB_LIBRARIES
     canvas
-    clhep
+    CLHEP
 )
 
 install_headers()
diff --git a/artg4tk/DataProducts/G4DetectorHits/CMakeLists.txt b/artg4tk/DataProducts/G4DetectorHits/CMakeLists.txt
index b538d42..f6336fc 100644
--- a/artg4tk/DataProducts/G4DetectorHits/CMakeLists.txt
+++ b/artg4tk/DataProducts/G4DetectorHits/CMakeLists.txt
@@ -1,6 +1,6 @@
 art_make(
   LIB_LIBRARIES
-    ${G4PARTICLES}
+    G4particles
 )
 
 install_headers()
diff --git a/artg4tk/EventGenerators/CMakeLists.txt b/artg4tk/EventGenerators/CMakeLists.txt
index 9cfe5d4..6d0019e 100644
--- a/artg4tk/EventGenerators/CMakeLists.txt
+++ b/artg4tk/EventGenerators/CMakeLists.txt
@@ -9,6 +9,6 @@ art_make(
     ${Boost_SYSTEM_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
 )
diff --git a/artg4tk/ExpDataAccess/CMakeLists.txt b/artg4tk/ExpDataAccess/CMakeLists.txt
index f9ce49d..824134b 100644
--- a/artg4tk/ExpDataAccess/CMakeLists.txt
+++ b/artg4tk/ExpDataAccess/CMakeLists.txt
@@ -8,7 +8,7 @@ endif()
 art_make(
   LIB_LIBRARIES
     ${CURL_LIBRARIES}
-    ${ROOT_CORE}
-    ${ROOT_HIST}
+    ${ROOT_Core_LIBRARY}
+    ${ROOT_Hist_LIBRARY}
     MF_MessageLogger
 )
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisBase/AnalyzerWithExpDataBase.cc b/artg4tk/G4PhysModelParamStudy/AnalysisBase/AnalyzerWithExpDataBase.cc
index 8dfb4da..148fcb9 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisBase/AnalyzerWithExpDataBase.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisBase/AnalyzerWithExpDataBase.cc
@@ -1,7 +1,7 @@
 
 #include "artg4tk/G4PhysModelParamStudy/AnalysisBase/AnalyzerWithExpDataBase.hh"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 #include "TFile.h"
 #include "TCanvas.h"
 
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisBase/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/AnalysisBase/CMakeLists.txt
index a613c4d..d27f445 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisBase/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisBase/CMakeLists.txt
@@ -1,17 +1,10 @@
-find_program(ROOT_CONFIG_EXECUTABLE root-config PATHS ${ROOTSYS}/bin $ENV{ROOTSYS}/bin)
-
-execute_process(
-  COMMAND ${ROOT_CONFIG_EXECUTABLE} --libs
-  OUTPUT_VARIABLE ROOT_LIBRARIES
-  OUTPUT_STRIP_TRAILING_WHITESPACE
-)
 
 art_make(
   LIB_LIBRARIES
-    art_Framework_Services_Optional_TFileService_service
+    art_root_io_TFileService_service
     artg4tk_ExpDataAccess
     artg4tk_G4PhysModelParamStudy_AnalysisProducts
     artg4tk_G4PhysModelParamStudy_AnalysisProducts_dict
-    ${G4_LIB_LIST}
+	 ${Geant4_LIBRARIES}
     ${ROOT_LIBRARIES}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisBase/ModelParamAnalyzerBase.cc b/artg4tk/G4PhysModelParamStudy/AnalysisBase/ModelParamAnalyzerBase.cc
index 6c25666..0c817e2 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisBase/ModelParamAnalyzerBase.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisBase/ModelParamAnalyzerBase.cc
@@ -15,7 +15,7 @@
 
 #include "art/Framework/Principal/Event.h"
 //
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 //
 // Run/Eevent data products
 #include "artg4tk/DataProducts/G4DetectorHits/ArtG4tkVtx.hh"        // Event data product
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerEdepTrk_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerEdepTrk_module.cc
index 4eba5f9..136bd24 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerEdepTrk_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerEdepTrk_module.cc
@@ -23,7 +23,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerHARP_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerHARP_module.cc
index d352d8e..67b14b7 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerHARP_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerHARP_module.cc
@@ -16,7 +16,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerIAEA_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerIAEA_module.cc
index 0e6e244..47683f6 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerIAEA_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerIAEA_module.cc
@@ -18,7 +18,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerITEP_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerITEP_module.cc
index db2e796..a01c25c 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerITEP_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerITEP_module.cc
@@ -16,7 +16,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerNA49_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerNA49_module.cc
index f132ac2..335638a 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerNA49_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerNA49_module.cc
@@ -17,7 +17,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerSASM6E_module.cc b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerSASM6E_module.cc
index 6a00263..1aa3f23 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerSASM6E_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/AnalyzerSASM6E_module.cc
@@ -16,7 +16,7 @@
 
 #include "CLHEP/Units/SystemOfUnits.h"
 
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 #include <vector>
 #include <iostream>
diff --git a/artg4tk/G4PhysModelParamStudy/AnalysisModules/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/AnalysisModules/CMakeLists.txt
index 405892d..dd0ead4 100644
--- a/artg4tk/G4PhysModelParamStudy/AnalysisModules/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/AnalysisModules/CMakeLists.txt
@@ -1,7 +1,7 @@
 art_make(
   MODULE_LIBRARIES
-    art_Framework_Services_Optional_TFileService_service
+    art_root_io_TFileService_service
     artg4tk_G4PhysModelParamStudy_AnalysisBase
     artg4tk_G4PhysModelParamStudy_StatAnalysisTools
-    ${G4_LIB_LIST}
+    ${Geant4_LIBRARIES}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/ApplicationModules/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/ApplicationModules/CMakeLists.txt
index 4752bdd..6a49fe1 100644
--- a/artg4tk/G4PhysModelParamStudy/ApplicationModules/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/ApplicationModules/CMakeLists.txt
@@ -4,5 +4,5 @@ art_make(
     artg4tk_G4PhysModelParamStudy_G4Components
     artg4tk_geantInit
     artg4tk_pluginDetectors_gdml
-    ${G4_LIB_LIST}
+	 ${Geant4_LIBRARIES}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/G4Components/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/G4Components/CMakeLists.txt
index d6f9fdc..1748554 100644
--- a/artg4tk/G4PhysModelParamStudy/G4Components/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/G4Components/CMakeLists.txt
@@ -1,4 +1,4 @@
 art_make(
   LIB_LIBRARIES
-    ${G4_LIB_LIST}
+    ${Geant4_LIBRARIES}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/G4Services/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/G4Services/CMakeLists.txt
index 6ca7679..4477233 100644
--- a/artg4tk/G4PhysModelParamStudy/G4Services/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/G4Services/CMakeLists.txt
@@ -2,5 +2,5 @@ art_make(
   SERVICE_LIBRARIES
     artg4tk_G4PhysModelParamStudy_G4Components
     artg4tk_geantInit
-    ${G4_LIB_LIST}
+    ${Geant4_LIBRARIES}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/RooMUTools/CMakeLists.txt b/artg4tk/G4PhysModelParamStudy/RooMUTools/CMakeLists.txt
index b73d09d..a78fd66 100644
--- a/artg4tk/G4PhysModelParamStudy/RooMUTools/CMakeLists.txt
+++ b/artg4tk/G4PhysModelParamStudy/RooMUTools/CMakeLists.txt
@@ -1,10 +1,9 @@
 find_library(ROOMULIB NAMES plotutils PATHS $ENV{ROOMU_SYS}/lib NO_DEFAULT_PATH)
 
 include_directories($ENV{ROOMU_SYS})
-
 art_make(
   MODULE_LIBRARIES
-    art_Framework_Services_Optional_TFileService_service
+    art_root_io_TFileService_service
     artg4tk_G4PhysModelParamStudy_AnalysisBase
     ${ROOMULIB}
 )
diff --git a/artg4tk/G4PhysModelParamStudy/RooMUTools/RooMUHistSummary_module.cc b/artg4tk/G4PhysModelParamStudy/RooMUTools/RooMUHistSummary_module.cc
index e65bd7f..15e10be 100644
--- a/artg4tk/G4PhysModelParamStudy/RooMUTools/RooMUHistSummary_module.cc
+++ b/artg4tk/G4PhysModelParamStudy/RooMUTools/RooMUHistSummary_module.cc
@@ -19,7 +19,7 @@
 
 // Services
 //
-#include "art/Framework/Services/Optional/TFileService.h"
+#include "art_root_io/TFileService.h"
 
 // Root 
 //
diff --git a/artg4tk/geantInit/CMakeLists.txt b/artg4tk/geantInit/CMakeLists.txt
index 4a91dd9..4b1a390 100644
--- a/artg4tk/geantInit/CMakeLists.txt
+++ b/artg4tk/geantInit/CMakeLists.txt
@@ -3,15 +3,15 @@ art_make(
     art_Framework_Services_Registry
     artg4tk_services_ActionHolder_service
     artg4tk_services_DetectorHolder_service
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
-    clhep
-    ${G4EVENT}
-    ${G4GLOBAL}
-    ${G4INTERCOMS}
-    ${G4RUN}
-    ${G4TRACKING}
+    CLHEP
+    G4event
+    G4global
+    G4intercoms
+    G4run
+    G4tracking
 )
 
 install_headers()
diff --git a/artg4tk/pluginActions/PrimaryEvent/CMakeLists.txt b/artg4tk/pluginActions/PrimaryEvent/CMakeLists.txt
index f6eb146..7118323 100644
--- a/artg4tk/pluginActions/PrimaryEvent/CMakeLists.txt
+++ b/artg4tk/pluginActions/PrimaryEvent/CMakeLists.txt
@@ -5,13 +5,13 @@ art_make(
     artg4tk_actionBase
     artg4tk_services_ActionHolder_service
     art_Persistency_Provenance
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
-    ${G4GLOBAL}
-    ${G4PARTICLES}
+    G4global
+    G4particles
     MF_MessageLogger
 )
diff --git a/artg4tk/pluginActions/general/CMakeLists.txt b/artg4tk/pluginActions/general/CMakeLists.txt
index 2d2b9a7..915d2f3 100644
--- a/artg4tk/pluginActions/general/CMakeLists.txt
+++ b/artg4tk/pluginActions/general/CMakeLists.txt
@@ -3,14 +3,14 @@ art_make(
     art_Framework_Services_Registry
     artg4tk_actionBase
     artg4tk_services_ActionHolder_service
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
-    ${G4EVENT}
-    ${G4GLOBAL}
-    ${G4PARTICLES}
-    ${G4RUN}
+    G4event
+    G4global
+    G4particles
+    G4run
 )
diff --git a/artg4tk/pluginActions/myKiller/CMakeLists.txt b/artg4tk/pluginActions/myKiller/CMakeLists.txt
index c96905e..f78f7f8 100644
--- a/artg4tk/pluginActions/myKiller/CMakeLists.txt
+++ b/artg4tk/pluginActions/myKiller/CMakeLists.txt
@@ -3,11 +3,11 @@ art_make(
     art_Framework_Services_Registry
     artg4tk_actionBase
     artg4tk_services_ActionHolder_service
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
     MF_MessageLogger
 )
diff --git a/artg4tk/pluginActions/myparticleGun/CMakeLists.txt b/artg4tk/pluginActions/myparticleGun/CMakeLists.txt
index d6f4787..f0ce8cd 100644
--- a/artg4tk/pluginActions/myparticleGun/CMakeLists.txt
+++ b/artg4tk/pluginActions/myparticleGun/CMakeLists.txt
@@ -3,12 +3,12 @@ art_make(
     art_Framework_Services_Registry
     artg4tk_actionBase
     artg4tk_services_ActionHolder_service
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
     fhiclcpp
-    ${G4EVENT}
-    ${G4PARTICLES}
+    G4event
+    G4particles
     MF_MessageLogger
 )
diff --git a/artg4tk/pluginActions/physicsList/CMakeLists.txt b/artg4tk/pluginActions/physicsList/CMakeLists.txt
index 20de73b..7125187 100644
--- a/artg4tk/pluginActions/physicsList/CMakeLists.txt
+++ b/artg4tk/pluginActions/physicsList/CMakeLists.txt
@@ -2,14 +2,14 @@ art_make(
   SERVICE_LIBRARIES
     art_Framework_Services_Registry
     artg4tk_services_PhysicsListHolder_service
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
-    ${G4PHYSICSLISTS}
-    ${G4RUN}
+    G4physicslists
+    G4run
 )
 
 install_headers()
diff --git a/artg4tk/pluginDetectors/gdml/CMakeLists.txt b/artg4tk/pluginDetectors/gdml/CMakeLists.txt
index 4dfc27d..d9a05ce 100644
--- a/artg4tk/pluginDetectors/gdml/CMakeLists.txt
+++ b/artg4tk/pluginDetectors/gdml/CMakeLists.txt
@@ -1,16 +1,15 @@
 art_make(
   LIB_LIBRARIES
     artg4tk_DataProducts_G4DetectorHits
-    clhep
-    ${G4DIGITS_HITS}
-    ${G4EVENT}
-    ${G4GEOMETRY}
-    ${G4GLOBAL}
-    ${G4GRAPHICS_REPS}
-    ${G4PARTICLES}
-    ${G4PERSISTENCY}
-    ${G4TRACK}
-    ${XERCESC}
+    CLHEP
+    G4digits_hits
+    G4event
+    G4geometry
+    G4global
+    G4graphics_reps
+    G4particles
+    G4persistency
+    G4track
   SERVICE_LIBRARIES
     art_Framework_Core
     art_Framework_Principal
@@ -23,15 +22,14 @@ art_make(
     ${Boost_SYSTEM_LIBRARY}
     canvas
     cetlib_except
-    clhep
+    CLHEP
     fhiclcpp
-    ${G4DIGITS_HITS}
-    ${G4GEOMETRY}
-    ${G4GLOBAL}
-    ${G4MATERIALS}
-    ${G4PERSISTENCY}
+    G4digits_hits
+    G4geometry
+    G4global
+    G4materials
+    G4persistency
     MF_MessageLogger
-    ${XERCESC}
 )
 
 install_headers()
diff --git a/artg4tk/services/CMakeLists.txt b/artg4tk/services/CMakeLists.txt
index 28e6f83..c900eed 100644
--- a/artg4tk/services/CMakeLists.txt
+++ b/artg4tk/services/CMakeLists.txt
@@ -2,8 +2,8 @@ art_make(
   SERVICE_LIBRARIES
     art_Framework_Core
     art_Persistency_Provenance
-    ${Boost_FILESYSTEM_LIBRARY}
-    ${Boost_SYSTEM_LIBRARY}
+    ${Boost_filesystem_LIBRARY}
+    ${Boost_system_LIBRARY}
     canvas
     cetlib_except
     fhiclcpp
diff --git a/artg4tk/util/CMakeLists.txt b/artg4tk/util/CMakeLists.txt
index 96433aa..f5e0695 100644
--- a/artg4tk/util/CMakeLists.txt
+++ b/artg4tk/util/CMakeLists.txt
@@ -1,6 +1,7 @@
 art_make(
   LIB_LIBRARIES
-    ${G4GRAPHICS_REPS}
+    G4graphics_reps
+    ${Geant4_LIBRARIES}
     cetlib_except
 )
 
diff --git a/cmakeConfig/CMakeLists.txt b/cmakeConfig/CMakeLists.txt
new file mode 100644
index 0000000..3fa02ca
--- /dev/null
+++ b/cmakeConfig/CMakeLists.txt
@@ -0,0 +1 @@
+cet_cmake_config()
diff --git a/examples/CMakeLists.txt b/examples/CMakeLists.txt
index dd654d5..f6df0ed 100644
--- a/examples/CMakeLists.txt
+++ b/examples/CMakeLists.txt
@@ -1,9 +1,7 @@
 file(GLOB fcl_files *.fcl *.gdml *.xml *.xsd *.C *.mac)
 
-install(
-  FILES ${fcl_files}
-  DESTINATION ${product}/${version}/${PROJECT_NAME}/examples
-)
+install( FILES ${fcl_files}
+         DESTINATION ${CMAKE_INSTALL_PREFIX}/examples )
 
 foreach(aFile ${fcl_files})
   get_filename_component(basename ${aFile} NAME)
diff --git a/macros/CMakeLists.txt b/macros/CMakeLists.txt
index 7c4b927..dedbdc5 100644
--- a/macros/CMakeLists.txt
+++ b/macros/CMakeLists.txt
@@ -1,9 +1,7 @@
 file(GLOB mac_files *.mac)
 
-install(
-  FILES ${mac_files}
-  DESTINATION ${product}/${version}/${PROJECT_NAME}/macros
-)
+install( FILES ${mac_files}
+         DESTINATION ${CMAKE_INSTALL_PREFIX}/macros )
 
 foreach(aFile ${mac_files})
   get_filename_component(basename ${aFile} NAME)
